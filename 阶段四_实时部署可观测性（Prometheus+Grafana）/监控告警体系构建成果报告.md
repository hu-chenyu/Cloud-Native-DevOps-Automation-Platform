# ç›‘æ§å‘Šè­¦ä½“ç³»æ„å»ºæˆæœæŠ¥å‘Š

## ğŸŒŸ æ ¸å¿ƒæˆæœäº®ç‚¹

### ğŸ›  å®¹å™¨çº§ç›‘æ§é‡‡é›†ä½“ç³»
- **å…¨ç»´åº¦æŒ‡æ ‡è¦†ç›–**
  âœ”ï¸  ä¸‰æ ¸å¿ƒæœåŠ¡çº³ç®¡ï¼šPrometheus/cAdvisor/Flaskåº”ç”¨ï¼ˆäºšç§’çº§ç²¾åº¦ï¼‰
  âœ”ï¸  ç²¾å‡†æ ‡ç­¾è¿‡æ»¤ï¼šstatus=~"5.."æ­£åˆ™åŒ¹é…5xxé”™è¯¯ï¼ˆè¯¯æŠ¥ç‡0%ï¼‰  
  âœ”ï¸  å¤šå±‚çº§é‡‡é›†ï¼šå®¹å™¨CPU/å†…å­˜/ç½‘ç»œæŒ‡æ ‡å®æ—¶æŠ“å–ï¼ˆé‡‡æ ·ç²¾åº¦15sï¼‰  

### ğŸš¨ æ™ºèƒ½å‘Šè­¦å¼•æ“
- **åŠ¨æ€é˜ˆå€¼å‘Šè­¦ä½“ç³»**
  âœ”ï¸  é”™è¯¯ç‡åŠ¨æ€è®¡ç®—ï¼š5åˆ†é’Ÿå†…5xxé”™è¯¯ç‡>5%æŒç»­è§¦å‘ï¼ˆå“åº”å»¶è¿Ÿâ‰¥10ç§’)
  âœ”ï¸  æ™ºèƒ½é™å™ªé…ç½®ï¼šå¼€å‘ç¯å¢ƒé™é»˜/éæ ¸å¿ƒæœåŠ¡å‘Šè­¦æŠ‘åˆ¶
  âœ”ï¸  å…¨é“¾è·¯è¿½è¸ªï¼šå‘Šè­¦ä¿¡æ¯ç›´é“¾Grafanaé¢æ¿ï¼ˆç”Ÿäº§éªŒè¯é€šè¿‡ï¼‰

### ğŸ“¡ å¤šé€šé“å‘Šè­¦è·¯ç”±
- **ä¼ä¸šçº§é€šçŸ¥ç³»ç»Ÿ**  
  âœ”ï¸  åŒé€šé“ä¿éšœï¼šé‚®ä»¶+Webhookå‘Šè­¦è·¯ç”±ï¼ˆæµ‹è¯•ç¯å¢ƒéªŒè¯ï¼‰
  âœ”ï¸  SMTPåŠ å¯†é€šä¿¡ï¼š163é‚®ç®±TLSåè®®ä¿éšœï¼ˆé…ç½®æ£€æŸ¥é€šè¿‡ï¼‰
  âœ”ï¸  åˆ†çº§å“åº”æœºåˆ¶ï¼šP95å»¶è¿Ÿè¶…é˜ˆå€¼è§¦å‘äºŒçº§å‘Šè­¦å‡çº§

### ğŸš€ å…³é”®æŠ€æœ¯çªç ´
```bash
# /etc/alertmanager/alertmanager.yml
route:
  group_by: ['alertname', 'service']
  group_wait: 10s
  group_interval: 5m
  receiver: 'default-email'
  routes:
  - match:
      environment: dev
    receiver: 'null'
  - match:
      severity: critical
    receiver: 'webhook-receiver'

receivers:
- name: 'default-email'
  email_configs:
  - to: 'iamhuchenyu@163.com'
    smarthost: 'smtp.163.com:587'
    auth_username: 'user'
    auth_password: '******'
    send_resolved: true
