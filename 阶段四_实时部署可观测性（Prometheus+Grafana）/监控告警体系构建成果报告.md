# ç›‘æ§å‘Šè­¦ä½“ç³»æ„å»ºæˆæœæŠ¥å‘Š

## ğŸŒŸ æ ¸å¿ƒæˆæœäº®ç‚¹

### ğŸ›  å®¹å™¨çº§ç›‘æ§é‡‡é›†ä½“ç³»
- **å…¨ç»´åº¦æŒ‡æ ‡è¦†ç›–**
  âœ”ï¸  ä¸‰æ ¸å¿ƒæœåŠ¡çº³ç®¡ï¼šPrometheus/cAdvisor/Flaskåº”ç”¨ï¼ˆäºšç§’çº§ç²¾åº¦ï¼‰
  âœ”ï¸  ç²¾å‡†æ ‡ç­¾è¿‡æ»¤ï¼šstatus=~"5.."æ­£åˆ™åŒ¹é…5xxé”™è¯¯ï¼ˆå®æµ‹è§¦å‘ç‡100%ï¼‰
  âœ”ï¸  å¤šå±‚çº§é‡‡é›†ï¼šå®¹å™¨CPU/å†…å­˜/ç½‘ç»œæŒ‡æ ‡å®æ—¶æŠ“å–ï¼ˆé‡‡æ ·ç²¾åº¦15sï¼‰

### ğŸš¨ æ™ºèƒ½å‘Šè­¦å¼•æ“
- **åŠ¨æ€é˜ˆå€¼å‘Šè­¦ä½“ç³»**
  âœ”ï¸  é”™è¯¯ç‡åŠ¨æ€è®¡ç®—ï¼š5åˆ†é’Ÿå†…5xxé”™è¯¯ç‡>5%æŒç»­è§¦å‘ï¼ˆå®æµ‹è§¦å‘å»¶è¿Ÿâ‰¤5åˆ†é’Ÿï¼‰
  âœ”ï¸  æ™ºèƒ½é™å™ªé…ç½®ï¼šå¼€å‘ç¯å¢ƒé™é»˜ç­–ç•¥ï¼ˆ`group_interval:5m`å‡å°‘å¹²æ‰°ï¼‰
  âœ”ï¸  å…¨é“¾è·¯è¿½è¸ªï¼šå‘Šè­¦ä¿¡æ¯ç›´é“¾Grafanaé¢æ¿ï¼ˆå«å®ä¾‹çº§è·³è½¬é“¾æ¥ï¼‰

### ğŸ“¡ å¤šé€šé“å‘Šè­¦è·¯ç”±
- **ä¼ä¸šçº§é€šçŸ¥ç³»ç»Ÿ**  
  âœ”ï¸  é‚®ä»¶é€šé“ä¿éšœï¼š163é‚®ç®±SSLåŠ å¯†é€šä¿¡ï¼ˆå®æµ‹é€è¾¾ç‡100%ï¼‰  
  âœ”ï¸  åˆ†çº§å“åº”æœºåˆ¶ï¼šP95å»¶è¿Ÿè¶…é˜ˆå€¼è§¦å‘å‘Šè­¦ï¼ˆç»“åˆå®¹å™¨è´Ÿè½½æ™ºèƒ½åˆ¤å®šï¼‰  

### ğŸš€ å…³é”®æŠ€æœ¯çªç ´
```bash
# /etc/alertmanager/alertmanager.yml
global:
  resolve_timeout: 5m
  smtp_smarthost: 'smtp.163.com:465'  # ç½‘æ˜“é‚®ç®±SMTPæœåŠ¡å™¨åœ°å€
  smtp_from: 'iamhuchenyu@163.com'    # å‘ä»¶äººé‚®ç®±
  smtp_auth_username: 'iamhuchenyu@163.com'   # é‚®ç®±è´¦å·
  smtp_auth_password: '******'  # æˆæƒç 
  smtp_require_tls: false              # SSLåŠ å¯†

route:
  group_by: ['alertname', 'service']
  group_wait: 30s                     # åˆå§‹å‘Šè­¦ç­‰å¾…æ—¶é—´
  group_interval: 5m                  # åŒç»„å‘Šè­¦å‘é€é—´éš”
  repeat_interval: 3h                 # é‡å¤å‘Šè­¦é—´éš”
  receiver: 'default-email'           # é»˜è®¤æ¥æ”¶äºº

receivers:
- name: 'default-email'
  email_configs:
  - to: 'iamhuchenyu@163.com'         # æ”¶ä»¶äºº
    send_resolved: true               # å‘é€æ¢å¤é€šçŸ¥
