# Terraformæ¨¡å—å¼€å‘æˆæœæŠ¥å‘Š

### ğŸŒŸ æ ¸å¿ƒæˆæœäº®ç‚¹
#### ğŸ› ï¸ ç½‘ç»œæ¨¡å—ï¼ˆnetwork/ï¼‰
- â€‹**æ™ºèƒ½VPCæ¶æ„**â€‹  
  âœ”ï¸ è·¨å¯ç”¨åŒºéƒ¨ç½²ï¼š`zone_id`æ”¯æŒå¤šAZå®¹ç¾ï¼ˆH/IåŒºäº’å¤‡ï¼‰  
  âœ”ï¸ åŠ¨æ€å­ç½‘åˆ†é…ï¼šä¼˜å…ˆå¤ç”¨å·²æœ‰CIDRï¼Œé»˜è®¤åˆ›å»º`10.0.1.0/24`  
  âœ”ï¸ å®‰å…¨ç»„è§„åˆ™ï¼šè‡ªåŠ¨æ³¨å…¥SSH+HTTPåŸºç¡€è§„åˆ™ï¼ˆ22/80ç«¯å£ï¼‰  

#### ğŸ’» è®¡ç®—æ¨¡å—ï¼ˆcompute/ï¼‰
- â€‹**ECSå…¨æ‰˜ç®¡**â€‹  
  âœ”ï¸ å®ä¾‹ä¿æŠ¤ï¼š`prevent_destroy`+`deletion_protection`åŒé‡é”å®š  
  âœ”ï¸ ç£ç›˜æ‰©å®¹ï¼šESSDäº‘ç›˜é€šè¿‡`system_disk_size = 40`å‚æ•°å›ºåŒ–ï¼ˆESSDé«˜æ€§èƒ½å­˜å‚¨ï¼‰  
  âœ”ï¸ æ•æ„Ÿæ§åˆ¶ï¼š`ecs_instance_ids`åŠ å¯†è¾“å‡ºï¼ˆsensitiveæ ‡è®°ï¼‰  

#### ğŸŒ è´Ÿè½½å‡è¡¡ï¼ˆloadbalancer/ï¼‰
- â€‹**æµé‡æ²»ç†**â€‹  
  âœ”ï¸ åŒåè®®æ”¯æŒï¼šHTTP/HTTPSç›‘å¬å™¨ï¼ˆ80/443ç«¯å£ï¼‰  
  âœ”ï¸ å¥åº·æ¢æ´»ï¼š`/healthcheck`è·¯å¾„+2xxçŠ¶æ€ç è¿‡æ»¤ï¼ˆä¸¥æ ¼åŒ¹é…ï¼‰  
  âœ”ï¸ ç°åº¦å‘å¸ƒï¼š`weight = 100`å‚æ•°å®ç°æµé‡åˆ‡æ¢ 

### ğŸš€ å…³é”®æŠ€æœ¯çªç ´
```hcl
# è·¨æ¨¡å—è”åŠ¨ï¼ˆçœŸå®ä»£ç ç‰‡æ®µï¼‰
module "compute" {
  vpc_id = module.network.vpc_id       # ç½‘ç»œå±‚è¾“å‡ºä¼ é€’
  security_group_id = "sg-bp15zxt89r754hap111s"  # æ˜¾å¼å®‰å…¨ç»„ç»‘å®š
}

# é˜²å¾¡æ€§ç¼–ç¨‹ï¼ˆæ–‡ä»¶éªŒè¯ï¼‰
variable "vswitch_id" {
  validation { 
    condition = length(var.vswitch_id) > 0 
    error_message = "å­ç½‘IDä¸èƒ½ä¸ºç©º"
  }
}
